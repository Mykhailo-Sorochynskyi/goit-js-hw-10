{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\n\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\n\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst input = document.querySelector('#datetime-picker');\n\nconst btn = document.querySelector('button[data-start]');\n// console.log(btn);\nbtn.disabled = true;\n\nconst seconds = document.querySelector('span[data-seconds]');\nconst minutes = document.querySelector('span[data-minutes]');\nconst hours = document.querySelector('span[data-hours]');\nconst days = document.querySelector('span[data-days]');\n\nlet userSelectedDate;\nlet intervalId;\nlet num = 0;\n\nconst options = {\n  enableTime: true,\n  dateFormat: 'Y-m-d H:i',\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    const nowDate = new Date();\n    let ms = selectedDates[0] - nowDate;\n\n    if (ms >= 0) {\n      userSelectedDate = selectedDates[0];\n      if (num === 0) {\n        btn.disabled = false;\n        num += 1;\n      } else {\n        btn.disabled = true;\n      }\n    } else {\n      iziToast.error({\n        message: '❌ Please choose a date in the future',\n        messageSize: 18,\n        messageLineHeight: 50,\n        position: 'topRight',\n        icon: '',\n      });\n    }\n  },\n};\n\nflatpickr(input, options);\n\nbtn.addEventListener('click', () => {\n  if (intervalId) {\n    clearInterval(intervalId);\n    num = 0;\n  }\n\n  input.disabled = true;\n  intervalId = setInterval(() => timer(), 1000);\n  btn.disabled = true;\n});\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n\n  const hours = Math.floor((ms % day) / hour);\n\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction timer() {\n  const now = new Date();\n  const ms = userSelectedDate - now;\n  if (ms <= 0) {\n    clearInterval(intervalId);\n    num = 0;\n    input.disabled = false;\n    return;\n  }\n\n  const time = convertMs(ms);\n\n  days.textContent = addLeadingZero(time.days);\n  hours.textContent = addLeadingZero(time.hours);\n  minutes.textContent = addLeadingZero(time.minutes);\n  seconds.textContent = addLeadingZero(time.seconds);\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n"],"names":["input","btn","seconds","minutes","hours","days","userSelectedDate","intervalId","num","options","selectedDates","nowDate","iziToast","flatpickr","timer","convertMs","ms","time","addLeadingZero","value"],"mappings":"0IAQA,MAAMA,EAAQ,SAAS,cAAc,kBAAkB,EAEjDC,EAAM,SAAS,cAAc,oBAAoB,EAEvDA,EAAI,SAAW,GAEf,MAAMC,EAAU,SAAS,cAAc,oBAAoB,EACrDC,EAAU,SAAS,cAAc,oBAAoB,EACrDC,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAO,SAAS,cAAc,iBAAiB,EAErD,IAAIC,EACAC,EACAC,EAAM,EAEV,MAAMC,EAAU,CACd,WAAY,GACZ,WAAY,YACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,MAAMC,EAAU,IAAI,KACXD,EAAc,CAAC,EAAIC,GAElB,GACRL,EAAmBI,EAAc,CAAC,EAC9BF,IAAQ,GACVP,EAAI,SAAW,GACfO,GAAO,GAEPP,EAAI,SAAW,IAGjBW,EAAS,MAAM,CACb,QAAS,uCACT,YAAa,GACb,kBAAmB,GACnB,SAAU,WACV,KAAM,EACd,CAAO,CAEJ,CACH,EAEAC,EAAUb,EAAOS,CAAO,EAExBR,EAAI,iBAAiB,QAAS,IAAM,CAC9BM,IACF,cAAcA,CAAU,EACxBC,EAAM,GAGRR,EAAM,SAAW,GACjBO,EAAa,YAAY,IAAMO,EAAO,EAAE,GAAI,EAC5Cb,EAAI,SAAW,EACjB,CAAC,EAED,SAASc,EAAUC,EAAI,CAMrB,MAAMX,EAAO,KAAK,MAAMW,EAAK,KAAG,EAE1BZ,EAAQ,KAAK,MAAOY,EAAK,MAAO,IAAI,EAEpCb,EAAU,KAAK,MAAQa,EAAK,MAAO,KAAQ,GAAM,EAEjDd,EAAU,KAAK,MAASc,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAX,EAAM,MAAAD,EAAO,QAAAD,EAAS,QAAAD,CAAO,CACxC,CAEA,SAASY,GAAQ,CAEf,MAAME,EAAKV,EADC,IAAI,KAEhB,GAAIU,GAAM,EAAG,CACX,cAAcT,CAAU,EACxBC,EAAM,EACNR,EAAM,SAAW,GACjB,MACD,CAED,MAAMiB,EAAOF,EAAUC,CAAE,EAEzBX,EAAK,YAAca,EAAeD,EAAK,IAAI,EAC3Cb,EAAM,YAAcc,EAAeD,EAAK,KAAK,EAC7Cd,EAAQ,YAAce,EAAeD,EAAK,OAAO,EACjDf,EAAQ,YAAcgB,EAAeD,EAAK,OAAO,CACnD,CAEA,SAASC,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC"}